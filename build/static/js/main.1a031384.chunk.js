(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){e.exports=n(269)},111:function(e,t,n){},116:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(16),o=n.n(r),c=(n(111),n(20)),s=n(21),u=n(29),l=n(28),h=n(30),d=n(98),m=n(99),k=n.n(m)()(),p=new(function(){function e(){Object(c.a)(this,e),this.accessToken=null,this.idToken=null,this.expiresAt=null,this.auth0=new d.a.WebAuth({domain:"kiddiekredit.auth0.com",clientID:"LVfVnJg9zngBlm5fIPkAPsZO5wyveh1z",redirectUri:-1===window.location.href.indexOf("localhost")?"http://kkadmin.s3-website-us-east-1.amazonaws.com/callback":"http://localhost:3000/callback",responseType:"token id_token",scope:"openid"}),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.getAccessToken=this.getAccessToken.bind(this),this.getIdToken=this.getIdToken.bind(this),this.renewSession=this.renewSession.bind(this)}return Object(s.a)(e,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;return new Promise(function(t,n){e.auth0.parseHash(function(a,i){if(a)return console.log(a),void n(a);i&&i.accessToken&&i.idToken&&(e.setSession(i),t(!0)),n("unknown error")})})}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"getIdToken",value:function(){return this.idToken}},{key:"setSession",value:function(e){localStorage.setItem("isLoggedIn","true");var t=1e3*e.expiresIn+(new Date).getTime();this.accessToken=e.accessToken,this.idToken=e.idToken,this.expiresAt=t}},{key:"renewSession",value:function(){var e=this;this.auth0.checkSession({},function(t,n){n&&n.accessToken&&n.idToken?(e.setSession(n),console.log(n.idToken)):t&&(e.logout(),console.log(t),alert("Could not get a new token (".concat(t.error,": ").concat(t.error_description,").")))})}},{key:"logout",value:function(){this.accessToken=null,this.idToken=null,this.expiresAt=0,localStorage.removeItem("isLoggedIn"),k.replace("/home")}},{key:"isAuthenticated",value:function(){var e=this.expiresAt;return(new Date).getTime()<e}}]),e}()),f=n(274),g=n(273),b=n(272),y=n(271),v=(n(116),n(22)),w=n.n(v),T=n(36),A=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.props),e.next=3,p.handleAuthentication();case 3:!0===e.sent&&this.props.history.push("/admin");case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement("div",{className:"app"},"loading...")}}]),t}(a.Component),E=function(e){var t=e.startAuth;return i.a.createElement("div",null,"not logged in route",i.a.createElement("button",{onClick:t},"log in"))},O=n(105),j=n(37),S=n(100),I=n(102),x=n.n(I),C=n(103),z=n.n(C),B=n(68),P=n.n(B),D=n(38),V=n.n(D),M=n(66),H=n.n(M),N=n(67),q=n.n(N),J=n(104),W=n.n(J),F="http://api.kiddiekredit.com:8080/educationalinfo/",L=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={parent:{utilization:"",paymentHistory:"",accountAge:"",numAccounts:"",creditInquiries:"",derogatoryMarks:""},child:{utilization:"",paymentHistory:"",accountAge:"",numAccounts:"",creditInquiries:"",derogatoryMarks:""},keys:["utilization","paymentHistory","accountAge","numAccounts","creditInquiries","derogatoryMarks"],labels:["Utilization","Payment History","Account Age","Num Accounts","Credit Inquiries","Derogatory Marks"],snackbarVisible:!1},n.displaySnackBar=function(){n.timeout&&clearTimeout(n.timeout),n.setState(function(){return{snackbarVisible:!0}}),n.timeout=setTimeout(function(){return n.setState(function(){return{snackbarVisible:!1}})},1250)},n.handleTextChange=function(e,t){return function(a){var i=a.target.value;n.setState(function(n){return Object(j.a)({},e,Object(S.a)({},n[e],Object(j.a)({},t,i)))})}},n.handleFormSubmit=function(e){return function(){var t=Object(T.a)(w.a.mark(function t(a){var i;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={child:"kidkreditdashboard",parent:"parentkreditdashboard"},t.next=3,fetch(F+i[e],{headers:{"Content-Type":"application/json",Authorization:"Bearer "+p.getIdToken()},method:"PUT",body:JSON.stringify(n.state[e])});case 3:200===t.sent.status?n.displaySnackBar():alert("Something went wrong, try again later");case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(w.a.mark(function e(){var t,n,a,i;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(p.getIdToken()),e.next=3,Promise.all([fetch(F+"parentkreditdashboard",{headers:{Authorization:"Bearer "+p.getIdToken()}}).then(function(e){return e.json()}),fetch(F+"kidkreditdashboard",{headers:{Authorization:"Bearer "+p.getIdToken()}}).then(function(e){return e.json()})]);case 3:t=e.sent,n=Object(O.a)(t,2),a=n[0],i=n[1],a&&this.setState(function(e){return{parent:a}}),i&&this.setState(function(e){return{child:i}});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return i.a.createElement(H.a,{container:!0,spacing:16,style:{maxWidth:800,margin:"2rem auto"}},i.a.createElement(H.a,{item:!0,xs:12},i.a.createElement(x.a,null,i.a.createElement(z.a,null,i.a.createElement(V.a,{color:"textSecondary"},"KiddieKredit"),i.a.createElement(V.a,{variant:"h5",component:"h2"},"Educational Info Administration - Parent"),i.a.createElement("div",{className:"form-container"},this.state.keys.map(function(t,n){return i.a.createElement(q.a,{key:t,value:e.state.parent[t],onChange:e.handleTextChange("parent",t),multiline:!0,id:t,label:e.state.labels[n],margin:"normal"})})),i.a.createElement(P.a,{variant:"contained",color:"primary",onClick:this.handleFormSubmit("parent")},"Save Changes"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(V.a,{variant:"h5",component:"h2"},"Educational Info Administration - Child"),i.a.createElement("div",{className:"form-container"},this.state.keys.map(function(t,n){return i.a.createElement(q.a,{key:t,value:e.state.child[t],onChange:e.handleTextChange("child",t),multiline:!0,id:t,label:e.state.labels[n],margin:"normal"})})),i.a.createElement(P.a,{variant:"contained",color:"primary",onClick:this.handleFormSubmit("child")},"Save Changes")))),i.a.createElement(W.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.snackbarVisible,onClose:function(){return e.setState(function(){return{snackbarVisible:!1}})},ContentProps:{"aria-describedby":"message-id"},message:i.a.createElement("span",{id:"message-id"},"Data Saved!")}))}}]),t}(a.Component),U=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(f.a,{history:k},i.a.createElement(g.a,null,i.a.createElement(b.a,{path:"/callback",component:A}),i.a.createElement(b.a,{path:"/admin",render:function(e){return p.getIdToken()?i.a.createElement(L,e):i.a.createElement(y.a,{to:"/"})}}),i.a.createElement(b.a,{path:"/",render:function(){return i.a.createElement(E,{startAuth:p.login})}})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[106,2,1]]]);
//# sourceMappingURL=main.1a031384.chunk.js.map