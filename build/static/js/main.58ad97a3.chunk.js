(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,n){e.exports=n(275)},120:function(e,t,n){},125:function(e,t,n){},275:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(17),o=n.n(i),c=(n(120),n(21)),s=n(22),l=n(30),u=n(29),d=n(31),h=n(106),m=n(107),p=n.n(m)()(),g=new(function(){function e(){Object(c.a)(this,e),this.accessToken=null,this.idToken=null,this.expiresAt=null,this.auth0=new h.a.WebAuth({domain:"kiddiekredit.auth0.com",clientID:"LVfVnJg9zngBlm5fIPkAPsZO5wyveh1z",redirectUri:-1===window.location.href.indexOf("localhost")?"http://kkadmin.s3-website-us-east-1.amazonaws.com/callback":"http://localhost:3000/callback",responseType:"token id_token",scope:"openid"}),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.getAccessToken=this.getAccessToken.bind(this),this.getIdToken=this.getIdToken.bind(this),this.renewSession=this.renewSession.bind(this)}return Object(s.a)(e,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;return new Promise(function(t,n){e.auth0.parseHash(function(a,r){if(a)return console.log(a),void n(a);r&&r.accessToken&&r.idToken&&(e.setSession(r),t(!0)),n("unknown error")})})}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"getIdToken",value:function(){return this.idToken}},{key:"setSession",value:function(e){localStorage.setItem("isLoggedIn","true");var t=1e3*e.expiresIn+(new Date).getTime();this.accessToken=e.accessToken,this.idToken=e.idToken,this.expiresAt=t}},{key:"renewSession",value:function(){var e=this;this.auth0.checkSession({},function(t,n){n&&n.accessToken&&n.idToken?(e.setSession(n),console.log(n.idToken)):t&&(e.logout(),console.log(t),alert("Could not get a new token (".concat(t.error,": ").concat(t.error_description,").")))})}},{key:"logout",value:function(){this.accessToken=null,this.idToken=null,this.expiresAt=0,localStorage.removeItem("isLoggedIn"),p.replace("/home")}},{key:"isAuthenticated",value:function(){var e=this.expiresAt;return(new Date).getTime()<e}}]),e}()),f=n(282),k=n(279),b=n(264),y=n(280),v=(n(125),n(23)),w=n.n(v),T=n(38),E=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.props),e.next=3,g.handleAuthentication();case 3:!0===e.sent&&this.props.history.push("/admin");case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},"loading...")}}]),t}(a.Component),j=function(e){var t=e.startAuth;return r.a.createElement("div",null,"not logged in route",r.a.createElement("button",{onClick:t},"log in"))},O=n(113),A=n(73),S=n(20),x=n(51),I=n(110),C=n.n(I),P=n(111),z=n.n(P),N=n(72),B=n.n(N),F=n(69),D=n.n(F),V=n(71),M=n.n(V),H=n(112),q=n.n(H),J=n(109),W=n.n(J),_=n(70),K=n.n(_),L=n(68),U=n.n(L),Z=n(39),$=n.n(Z);function G(e){var t=e.formKeys,n=e.labels,a=e.values,i=e.segmentType,o=e.handleTextChange,c=e.addNewParagraph,s=e.deleteParagraph,l=e.handleFormSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,t.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement("h3",null,n[t]," (",i,")"),a[e].map(function(c,l){return r.a.createElement($.a,{container:!0,direction:"row",alignItems:"flex-end"},r.a.createElement($.a,{item:!0,xs:10,className:"form-container"},r.a.createElement(W.a,{key:"".concat(e,"-").concat(l),value:a[e][l],onChange:o(i,e,l),multiline:!0,id:"".concat(e,"-").concat(l),label:n[t]+" paragraph "+(l+1),margin:"normal"})),r.a.createElement($.a,{item:!0,xs:2,style:{textAlign:"center",paddingBottom:10}},r.a.createElement(K.a,{onClick:s(i,e,l),variant:"extended",color:"disabled",size:"small"},"x")))}),r.a.createElement(K.a,{color:"primary",size:"small",onClick:c(i,e)},"+"))})),r.a.createElement(U.a,{style:{marginTop:16},variant:"contained",color:"primary",onClick:l(i)},"Save Changes"))}var Q=n(267),R=n(265),X=n(281),Y="http://api.kiddiekredit.com:8080/educationalinfo/",ee=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={parent:{utilization:[""],paymentHistory:[""],accountAge:[""],numAccounts:[""],creditInquiries:[""],derogatoryMarks:[""]},child:{utilization:[""],paymentHistory:[""],accountAge:[""],numAccounts:[""],creditInquiries:[""],derogatoryMarks:[""]},keys:["utilization","paymentHistory","accountAge","numAccounts","creditInquiries","derogatoryMarks"],labels:["Utilization","Payment History","Account Age","Num Accounts","Credit Inquiries","Derogatory Marks"],snackbarVisible:!1},n.displaySnackBar=function(){n.timeout&&clearTimeout(n.timeout),n.setState(function(){return{snackbarVisible:!0}}),n.timeout=setTimeout(function(){return n.setState(function(){return{snackbarVisible:!1}})},1250)},n.addNewParagraph=function(e,t){return function(){return n.setState(function(n){return Object(S.a)({},e,Object(x.a)({},n[e],Object(S.a)({},t,n[e][t].concat([""]))))})}},n.deleteParagraph=function(e,t,a){return function(){return n.setState(function(n){return Object(S.a)({},e,Object(x.a)({},n[e],Object(S.a)({},t,n[e][t].filter(function(e,t){return t!==a}))))})}},n.handleTextChange=function(e,t,a){return function(r){var i=r.target.value;n.setState(function(n){return Object(S.a)({},e,Object(x.a)({},n[e],Object(S.a)({},t,[].concat(Object(A.a)(n[e][t].slice(0,a)),[i],Object(A.a)(n[e][t].slice(a+1))))))})}},n.handleFormSubmit=function(e){return function(){var t=Object(T.a)(w.a.mark(function t(a){var r,i,o;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(o in r={child:"kidkreditdashboard",parent:"parentkreditdashboard"},i={},n.state[e])console.log(o),i[o]=n.state[e][o].join("|");return t.next=5,fetch(Y+r[e],{headers:{"Content-Type":"application/json",Authorization:"Bearer "+g.getIdToken()},method:"PUT",body:JSON.stringify(i)});case 5:200===t.sent.status?n.displaySnackBar():alert("Something went wrong, try again later");case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(w.a.mark(function e(){var t,n,a,r,i,o;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(g.getIdToken()),e.next=3,Promise.all([fetch(Y+"parentkreditdashboard",{headers:{Authorization:"Bearer "+g.getIdToken()}}).then(function(e){return e.json()}),fetch(Y+"kidkreditdashboard",{headers:{Authorization:"Bearer "+g.getIdToken()}}).then(function(e){return e.json()})]);case 3:for(i in t=e.sent,n=Object(O.a)(t,2),a=n[0],r=n[1],a)"_id"!==i&&"string"===typeof a[i]?a[i]=a[i].split("|"):delete a[i];for(o in r)"_id"!==o&&"string"===typeof r[o]?r[o]=r[o].split("|"):delete r[o];console.log(a,r),a&&r&&this.setState(function(){return{parent:a,child:r}});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.location.pathname;return r.a.createElement(M.a,{container:!0,spacing:16,style:{maxWidth:800,margin:"2rem auto"}},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(C.a,null,r.a.createElement(z.a,null,r.a.createElement(D.a,{variant:"h5",component:"h3"},"Educational Info Administration"),r.a.createElement(X.a,{to:"/admin"},r.a.createElement(B.a,{color:"/admin"===t?"primary":"disabled"},"Parent")),r.a.createElement(X.a,{to:"/admin/child"},r.a.createElement(B.a,{color:"/admin/child"===t?"primary":"disabled"},"Child")),r.a.createElement(Q.a,null,r.a.createElement(R.a,{path:"/admin/child",render:function(){return r.a.createElement(G,{formKeys:e.state.keys,labels:e.state.labels,segmentType:"child",values:e.state.child,handleTextChange:e.handleTextChange,addNewParagraph:e.addNewParagraph,deleteParagraph:e.deleteParagraph,handleFormSubmit:e.handleFormSubmit})}}),r.a.createElement(R.a,{path:"/admin",render:function(){return r.a.createElement(G,{formKeys:e.state.keys,labels:e.state.labels,segmentType:"parent",values:e.state.parent,handleTextChange:e.handleTextChange,addNewParagraph:e.addNewParagraph,deleteParagraph:e.deleteParagraph,handleFormSubmit:e.handleFormSubmit})}}))))),r.a.createElement(q.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.snackbarVisible,onClose:function(){return e.setState(function(){return{snackbarVisible:!1}})},ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Data Saved!")}))}}]),t}(a.Component),te=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{history:p},r.a.createElement(k.a,null,r.a.createElement(b.a,{path:"/callback",component:E}),r.a.createElement(b.a,{path:"/admin",render:function(e){return g.getIdToken()?r.a.createElement(ee,e):r.a.createElement(y.a,{to:"/"})}}),r.a.createElement(b.a,{path:"/",render:function(){return r.a.createElement(j,{startAuth:g.login})}})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[115,2,1]]]);
//# sourceMappingURL=main.58ad97a3.chunk.js.map